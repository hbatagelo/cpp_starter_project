version: 1.0.{build}

# Build worker image (VM template)
image:
- Visual Studio 2019

environment:
  matrix:

# Clone directory
clone_folder: c:\projects\source

install:

# Custom build script
build_script:
  - mkdir build
  - cd build
  - cmake c:\projects\source -G "Visual Studio 16 2019"
  - cmake --build . --config "Release"

# Custom test script
test_script:
  - ctest -C Release -VV

artifacts:
  - path: 'build\src\Release\intro.exe'
    name: cpp_starter_project
